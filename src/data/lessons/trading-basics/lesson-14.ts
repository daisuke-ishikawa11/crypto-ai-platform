import type { Lesson } from '@/lib/types/learning';

export const lesson14: Lesson = {
  id: 'trading-basics-14',
  slug: 'adx-average-directional-index',
  title: 'ADX（平均方向性指数）の活用法',
  description: 'J.ウェルズ・ワイルダーが開発したADXの仕組みを理解し、トレンドの強さを数値化してトレンドフォローとレンジブレイクアウトの判定に活用する方法を学習します。',
  categoryId: '3',
  difficultyLevel: 'intermediate',
  estimatedMinutes: 26,
  orderIndex: 14,
  isPublished: true,
  tags: ['ADX', '平均方向性指数', 'トレンド強度', 'DI+', 'DI-', 'ワイルダー'],
  
  content: {
    sections: [
      {
        type: 'text',
        content: `# ADX（平均方向性指数）とは

**ADX（Average Directional Index）**は、J.ウェルズ・ワイルダーによって開発された、**トレンドの強さを測定する**指標です。価格の方向性ではなく、**トレンドの強度**に焦点を当てており、トレンド相場とレンジ相場の判別、そしてトレンドの継続性を評価するために使用されます。

## ADXシステムの構成要素

### 3つの指標から構成
1. **+DI（Plus Directional Indicator）**: 上昇の力
2. **-DI（Minus Directional Indicator）**: 下降の力  
3. **ADX**: トレンドの強さ（0-100の範囲）

### 基本的な計算方法

#### True Range（TR）の計算
**TR = MAX[(High-Low), |High-前日Close|, |Low-前日Close|]**

#### Directional Movement（DM）の計算
- **+DM = 当日High - 前日High（前日Low - 当日Low > 当日High - 前日Highの場合は0）**
- **-DM = 前日Low - 当日Low（当日High - 前日High > 前日Low - 当日Lowの場合は0）**

#### DI指標の計算
- **+DI = (+DM14の平滑移動平均 ÷ TR14の平滑移動平均) × 100**
- **-DI = (-DM14の平滑移動平均 ÷ TR14の平滑移動平均) × 100**

#### ADXの計算
- **DX = |+DI - -DI| ÷ (+DI + -DI) × 100**
- **ADX = DXの14期間平滑移動平均**

### 標準設定
- **期間**: 14期間（標準）
- **短期**: 10期間（より敏感）
- **長期**: 21期間（より安定）

## ADXレベルの解釈

### トレンド強度の判定
- **0-20**: 弱いトレンドまたはレンジ相場
- **20-25**: 新しいトレンドの始まり可能性
- **25-40**: 強いトレンド
- **40-50**: 非常に強いトレンド
- **50+**: 極めて強いトレンド（反転リスクも増大）

### 市場状況の判定
- **ADX上昇中**: トレンド強化継続
- **ADX下降中**: トレンド弱化、レンジ移行可能性
- **ADX横ばい**: 現状維持、方向感なし`
      },

      {
        type: 'text',
        content: `# ADXの基本的な活用法

## トレンド強度の判定

### 強いトレンド（ADX 25以上）
- **条件**: ADXが25を上回り、上昇継続
- **戦略**: トレンドフォロー戦略採用
- **エントリー**: DI線の方向に順張り
- **保有**: ADXが25以上の間は基本保持

### 弱いトレンド・レンジ（ADX 20以下）
- **条件**: ADXが20を下回り、横ばいまたは下降
- **戦略**: レンジ戦略または静観
- **エントリー**: 逆張りまたはブレイクアウト待ち
- **注意**: トレンドフォローは避ける

## DI線による方向判定

### +DI > -DI（上昇トレンド）
- **意味**: 上昇の力が下降の力を上回る
- **条件**: +DIが-DIを上から推移
- **戦略**: 買いポジション優先
- **確認**: ADX 25以上で信頼性向上

### -DI > +DI（下降トレンド）
- **意味**: 下降の力が上昇の力を上回る
- **条件**: -DIが+DIを上から推移
- **戦略**: 売りポジション優先
- **確認**: ADX 25以上で信頼性向上

## DI線のクロスオーバー

### +DI/-DIゴールデンクロス
- **発生**: +DIが-DIを下から上抜け
- **意味**: 上昇トレンドの開始可能性
- **確認**: ADX上昇同伴で信頼性向上
- **エントリー**: クロス確認後の買いポジション

### +DI/-DIデッドクロス
- **発生**: +DIが-DIを上から下抜け
- **意味**: 下降トレンドの開始可能性
- **確認**: ADX上昇同伴で信頼性向上
- **エントリー**: クロス確認後の売りポジション

## ADXトレンドの活用

### ADX上昇局面
- **意味**: トレンド強化継続中
- **戦略**: 既存トレンド方向への追随
- **ポジション**: トレンド方向で積極的保有
- **注意**: 50超えでの反転可能性

### ADX下降局面  
- **意味**: トレンド弱化、終了可能性
- **戦略**: ポジション縮小・利確検討
- **新規**: 新規エントリーは慎重に
- **準備**: レンジ戦略への切り替え準備`
      },

      {
        type: 'example',
        content: `## 実際のトレード例：ビットコイン分析

### 2024年春季のADX活用例

**3月上旬：強いトレンド発生の確認**
- **価格状況**: $60,000から急上昇開始
- **ADX**: 15→35への急上昇（トレンド強化）
- **DI状況**: +DI=40、-DI=15（明確な上昇優勢）
- **シグナル**: ADX25突破 + DI線優勢確認
- **戦略**: $62,000での追加買いエントリー
- **結果**: 2週間で$73,000まで18%上昇

**4月中旬：トレンド継続の確認**
- **価格状況**: $70,000台での高値圏推移
- **ADX**: 45で高水準維持（強いトレンド継続）
- **調整**: 一時的な3%調整発生
- **判断**: ADX高水準のためトレンド継続期待
- **戦略**: 調整での押し目買い実行
- **保有**: ADX25以上のため基本ホールド継続
- **結果**: 10日後に新高値$75,000更新

**5月：トレンド終了の早期察知**
- **価格状況**: $75,000で高値圏停滞
- **ADX**: 50→35への下降開始（トレンド弱化）
- **DI変化**: +DI/-DI差の縮小確認
- **警戒**: トレンド終了の可能性示唆
- **戦略**: ADX35割れで段階的利確開始
- **結果**: その後2週間で$65,000まで13%調整

**学習ポイント**: ADXは方向性ではなく強度を示すため、DI線との組み合わせが必須`
      },

      {
        type: 'tip',
        content: `**ADX活用のコツ**

1. **ADXとDI線の組み合わせ**:
   - ADX単独では方向性不明
   - 必ずDI線で方向性確認
   - 両者の一致でシグナル信頼性向上

2. **段階的な判定**:
   - ADX20: トレンド可能性の芽生え
   - ADX25: トレンド確定の基準
   - ADX40: 極めて強いトレンド
   - ADX50+: 反転リスクも考慮

3. **時間軸の活用**: 長期時間軸でのADX分析で大局的トレンド把握！`
      },

      {
        type: 'text',
        content: `# 実践的なADX戦略

## トレンドフォロー戦略

### 基本的なトレンド判定手法
1. **ADX確認**: ADXが25以上で上昇中
2. **方向確認**: DI線の優勢方向確認
3. **エントリー**: 優勢DI方向への順張り
4. **保有**: ADX25以上維持中のポジション継続
5. **エグジット**: ADX25割れまたはDI線逆転

### 段階的エントリー戦略
- **第1段階**: ADX20突破での試し玉
- **第2段階**: ADX25確定での本格エントリー
- **第3段階**: ADX30超での追加ポジション
- **利確**: ADX40以上での段階的利確

### リスク管理
- **ストップロス**: DI線逆転で損切り
- **ポジションサイズ**: ADXレベルに応じた調整
- **保有期間**: ADX推移に応じた柔軟対応

## レンジブレイクアウト戦略

### レンジ相場の確認
1. **ADX状態**: ADX20以下で横ばい推移
2. **価格確認**: 明確なレンジ形成確認
3. **ブレイク準備**: レンジ上下限での待機
4. **ADX変化**: ADX上昇開始の確認

### ブレイクアウトエントリー
- **価格ブレイク**: レンジ上下限の明確突破
- **ADX確認**: ADX上昇開始の同時確認
- **DI確認**: ブレイク方向のDI優勢確認
- **エントリー**: 3条件揃い後のエントリー

## 複合戦略の活用

### ADX + 移動平均線
- **トレンド**: 移動平均線で大方向確認
- **強度**: ADXでトレンド強度確認
- **エントリー**: 両者一致でのエントリー
- **フィルター**: ADX弱い時の取引回避

### ADX + RSI
- **過熱感**: RSIで買われすぎ・売られすぎ確認
- **継続性**: ADXでトレンド継続性確認
- **タイミング**: RSI調整 + ADX継続での追加
- **警戒**: 両指標極値での反転注意

### ADX + ボリンジャーバンド
- **ブレイク**: バンド突破 + ADX上昇
- **継続**: バンド外推移 + ADX維持
- **反転**: バンド内復帰 + ADX下降
- **確認**: 価格・モメンタム両面での判定`
      },

      {
        type: 'text',
        content: `# ADXの高度な活用法

## マルチタイムフレーム分析

### 時間軸別の活用
- **長期軸（週足）**: 大局的トレンド強度確認
- **中期軸（日足）**: メイントレンド・戦略決定
- **短期軸（4時間足）**: エントリータイミング調整

### 統合判断手法
1. **週足**: 大局的トレンド方向とADX確認
2. **日足**: 中期的なトレンド強度評価
3. **4時間足**: 具体的なエントリーポイント
4. **一致**: 複数時間軸でのADX・DI一致

## ADXパターン分析

### ADXの上昇パターン
- **急上昇**: 短期間でのADX急上昇（強いトレンド開始）
- **緩上昇**: 徐々のADX上昇（トレンド育成中）
- **継続**: 高水準でのADX維持（トレンド継続）

### ADXの下降パターン  
- **急下降**: 短期間でのADX急下降（トレンド終了）
- **緩下降**: 徐々のADX下降（トレンド弱化）
- **低位**: 低水準でのADX維持（レンジ継続）

## 市場特性への適応

### 暗号通貨市場での調整
- **標準期間**: 14期間（基本）
- **高ボラ調整**: 10期間（より敏感）
- **安定重視**: 21期間（ノイズ除去）

### ADX閾値の調整
- **標準**: 25（トレンド確定）
- **敏感**: 20（早期確認）
- **厳格**: 30（強いトレンドのみ）

## 季節性・サイクル分析

### 暗号通貨の季節パターン
- **Q1**: 年始ラリー期（ADX上昇期待）
- **Q2**: 調整期（ADX下降傾向）
- **Q3**: 夏枯れ期（ADX低位推移）
- **Q4**: 年末ラリー期（ADX上昇期待）

### サイクルとの組み合わせ
1. **4年サイクル**: 半減期サイクルとADX分析
2. **年間サイクル**: 季節性とADXトレンド
3. **月間サイクル**: 月末月初効果の考慮
4. **統合**: 複数サイクルでの総合判断

## 実践的な改善ポイント

### バックテスト検証
- **期間**: 過去2-3年のデータ検証
- **パラメーター**: 最適期間・閾値の検証
- **成績**: 勝率・リスクリワード比分析
- **改善**: 結果に基づく手法調整

### リアルタイム監視
- **アラート**: ADX25突破・割れアラート設定
- **DI監視**: DI線クロスの自動通知
- **複合**: 他指標との組み合わせ通知
- **管理**: シグナル品質の継続評価`
      },

      {
        type: 'quiz',
        content: '理解度チェック',
        metadata: {
          questions: [
            {
              question: 'ADXが30、+DIが35、-DIが20の場合、どのような状況と判断できますか？',
              options: [
                '弱い上昇トレンドが継続中',
                '強い上昇トレンドが継続中',
                'レンジ相場で方向感なし',
                '下降トレンドが始まっている'
              ],
              correctAnswer: '強い上昇トレンドが継続中',
              explanation: 'ADX30は強いトレンドを示し、+DI(35) > -DI(20)で上昇方向が優勢なため、強い上昇トレンドが継続中と判断できます。'
            }
          ]
        }
      },

      {
        type: 'warning',
        content: `**ADX使用時の注意点**

### 1. 方向性の誤認リスク
**問題**: ADX単独での方向性判断は不可能
**対策**:
- 必ずDI線との組み合わせ使用
- +DI/-DIの優劣関係確認
- 価格チャートとの整合性確認
- 他の方向性指標との併用

### 2. 遅行指標の限界
**問題**: ADXはトレンド確定後のシグナル
**対策**:
- 早期シグナルへの過度な期待回避
- トレンド初期段階での慎重判断
- 他の先行指標との組み合わせ
- リスク管理の徹底

### 3. 極値での反転リスク
**問題**: ADX50超での反転可能性増大
**対策**:
- 高ADX値での利確検討
- ポジションサイズの段階的縮小
- 反転シグナルへの注意深い監視
- 利益確定ルールの事前設定

### 4. レンジ相場での誤用
**問題**: ADX低位時のトレンドフォロー適用
**対策**:
- ADX20以下での戦略変更
- レンジ戦略への適切な切り替え
- ブレイクアウト待機姿勢
- 無駄な売買の回避

**成功の秘訣**: ADXは「いつトレンドフォローを行うべきか」を教えてくれる重要な指標です。相場環境の正確な把握が成功の鍵となります。`
      }
    ],

    keyPoints: [
      'ADXはトレンドの方向性ではなく強度を測定する指標',
      'ADX25以上で強いトレンド、20以下でレンジ相場と判定',
      '+DI/-DIの優劣関係でトレンド方向を確認',
      'DI線のクロスオーバーでトレンド転換のシグナル',
      'ADX上昇中はトレンド強化、下降中はトレンド弱化',
      'ADX50超では極めて強いトレンドだが反転リスクも増大',
      'レンジ相場（ADX20以下）ではトレンドフォローを避ける',
      '他のテクニカル指標との組み合わせで精度向上'
    ]
  }
}; 