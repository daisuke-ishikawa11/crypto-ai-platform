import { Lesson } from '@/lib/types/learning'

export const lesson2: Lesson = {
  id: 'crypto-basics-blockchain',
  categoryId: '2',
  title: 'ブロックチェーンの仕組み：デジタル台帳の革命',
  slug: 'blockchain-basics',
  description: 'ブロックチェーン技術の基本的な仕組み、特徴、そして実社会での応用について学びます',
  difficultyLevel: 'beginner',
  estimatedMinutes: 18,
  orderIndex: 2,
  isPublished: true,
  tags: ['ブロックチェーン', '分散台帳', '技術', '基礎'],
  
  content: {
    sections: [
      {
        type: 'text',
        title: 'ブロックチェーンとは',
        content: `**ブロックチェーン**は、取引データを「ブロック」という単位で記録し、それらをチェーン状に連結した分散型デジタル台帳技術です。

## ブロックチェーンの基本構造

**ブロック（Block）**
- 一定期間内の取引データをまとめたもの
- 各ブロックは固有のID（ハッシュ）を持つ
- 前のブロックの情報も含んでいる

**チェーン（Chain）**
- ブロックを時系列順に連結
- 一度作成されたブロックは変更が困難
- 全体で一つの連続した記録となる

**分散型ネットワーク**
- 同じデータを複数のコンピューターで管理
- 中央管理者が存在しない
- ネットワーク参加者が合意してデータを更新`
      },

      {
        type: 'text',
        title: 'ブロックチェーンの特徴',
        content: `## 主要な特徴

**1. 分散性（Decentralization）**
- 中央管理者がいない
- 世界中のコンピューターが協力して運営
- 単一障害点が存在しない

**2. 透明性（Transparency）**
- すべての取引が公開されている
- 誰でも取引履歴を確認可能
- 不正や改ざんが発見しやすい

**3. 不変性（Immutability）**
- 一度記録されたデータは変更困難
- 過去の取引を改ざんするのは実質不可能
- 信頼性の高い記録保持

**4. セキュリティ（Security）**
- 暗号技術による強固な保護
- 分散化によるリスク分散
- 51%攻撃への耐性

**5. プログラマブル（Programmable）**
- スマートコントラクトの実装が可能
- 自動執行される契約
- 複雑な条件設定が可能`
      },

      {
        type: 'example',
        title: '銀行の台帳との比較',
        content: `## 従来の銀行システム vs ブロックチェーン

**従来の銀行システム**
\`\`\`
[銀行A] ←→ [銀行B]
   ↓         ↓
[顧客A]   [顧客B]

• 中央集権的
• 銀行が全ての取引を管理
• 取引には銀行の承認が必要
• 営業時間内のみ処理
\`\`\`

**ブロックチェーンシステム**
\`\`\`
[ノード1] ←→ [ノード2]
    ↑           ↑
    └─ [ノード3] ─┘
       ↓
   [分散台帳]

• 分散型
• 複数のノードが協力して管理
• P2P（個人間）取引が可能
• 24時間365日稼働
\`\`\`

**主な違い**
- **信頼**: 銀行への信頼 vs 数学的・技術的信頼
- **コスト**: 高い手数料 vs 低い手数料
- **スピード**: 数日 vs 数分〜数時間
- **透明性**: 限定的 vs 完全に透明`
      },

      {
        type: 'text',
        title: 'ブロックチェーンの仕組み',
        content: `## 取引の流れ

**1. 取引の発生**
- ユーザーAがユーザーBに暗号通貨を送金
- 取引情報がネットワークに送信される

**2. 取引の検証**
- ネットワーク参加者（ノード）が取引を検証
- 送金者が十分な残高を持っているか確認
- デジタル署名の正当性をチェック

**3. ブロックの作成**
- 検証済みの取引をブロックにまとめる
- マイナー（採掘者）が新しいブロックを作成
- 計算問題を解くことで承認権を獲得

**4. ブロックの承認**
- 新しいブロックがネットワークに提案される
- 他のノードがブロックの正当性を確認
- 過半数の同意が得られれば承認

**5. ブロックチェーンへの追加**
- 承認されたブロックがチェーンに追加
- 全ノードが同じ状態を保持
- 取引が完了・確定される`
      },

      {
        type: 'text',
        title: '合意アルゴリズム',
        content: `## 主要な合意メカニズム

**1. プルーフ・オブ・ワーク（PoW）**
- ビットコインで使用
- 計算問題を解くことで承認権を獲得
- 大量の電力消費が課題

**2. プルーフ・オブ・ステーク（PoS）**
- イーサリアム2.0で採用
- 保有量に応じて承認権を獲得
- 省エネルギー

**3. 実用的ビザンチン障害耐性（pBFT）**
- 企業向けブロックチェーンで使用
- 高速な処理が可能
- 参加者が限定される

**4. 権限証明（PoA）**
- 事前に承認されたノードのみが参加
- 高速で効率的
- 中央集権的な側面がある`
      },

      {
        type: 'text',
        title: 'ブロックチェーンの応用分野',
        content: `## 暗号通貨以外の活用例

**1. 供給チェーン管理**
- 食品のトレーサビリティ
- 偽造品の防止
- 原材料の追跡

**2. デジタルアイデンティティ**
- 身分証明書のデジタル化
- 学位証明書の管理
- 医療記録の共有

**3. 不動産取引**
- 土地・建物の所有権管理
- 契約の自動化
- 仲介手数料の削減

**4. 投票システム**
- 選挙の透明性向上
- 不正投票の防止
- リアルタイム集計

**5. 知的財産権**
- 著作権の保護
- 特許の管理
- 創作物の証明

**6. 金融サービス**
- 分散型金融（DeFi）
- 保険の自動化
- 国際送金の効率化`
      },

      {
        type: 'tip',
        title: 'ブロックチェーンの理解を深めるために',
        content: `**学習のポイント**

🔍 **段階的な学習**
- まず基本概念を理解する
- 実際の取引を観察してみる
- 簡単なウォレットを作成してみる

🔍 **実践的な体験**
- ブロックエクスプローラーで取引を確認
- テストネットで取引を体験
- 少額での実取引を経験

🔍 **継続的な学習**
- 技術の進歩に合わせて知識を更新
- 最新のプロジェクトを調査
- コミュニティに参加して情報交換`
      },

      {
        type: 'quiz',
        title: '理解度チェック',
        questions: [
          {
            id: 'q1',
            questionType: 'multiple_choice',
            question: 'ブロックチェーンの「不変性」とはどのような特徴ですか？',
            options: [
              '取引スピードが変わらない',
              '手数料が一定である',
              '一度記録されたデータは変更が困難',
              '参加者数が変わらない'
            ],
            correctAnswer: '一度記録されたデータは変更が困難',
            explanation: 'ブロックチェーンの不変性とは、一度記録されたデータを後から改ざんすることが極めて困難であることを指します。'
          },
          {
            id: 'q2',
            questionType: 'multiple_choice',
            question: 'ビットコインで使用されている合意アルゴリズムは？',
            options: [
              'プルーフ・オブ・ステーク（PoS）',
              'プルーフ・オブ・ワーク（PoW）',
              '実用的ビザンチン障害耐性（pBFT）',
              '権限証明（PoA）'
            ],
            correctAnswer: 'プルーフ・オブ・ワーク（PoW）',
            explanation: 'ビットコインは計算問題を解くことで承認権を獲得するプルーフ・オブ・ワーク（PoW）を使用しています。'
          },
          {
            id: 'q3',
            questionType: 'true_false',
            question: 'ブロックチェーンは暗号通貨以外の分野でも応用できる。',
            options: ['正しい', '間違い'],
            correctAnswer: '正しい',
            explanation: 'ブロックチェーンは供給チェーン管理、デジタルアイデンティティ、不動産取引など、多くの分野で応用されています。'
          }
        ]
      },

      {
        type: 'warning',
        title: 'ブロックチェーンの課題',
        content: `**現在のブロックチェーンが抱える主な課題**

⚠️ **スケーラビリティ問題**
- 処理速度の限界
- 取引量増加に伴う遅延
- 高い手数料

⚠️ **エネルギー消費**
- PoWの大量電力消費
- 環境への影響
- 持続可能性の問題

⚠️ **規制の不確実性**
- 各国の規制方針が不明確
- 法的地位の確立が途上
- 規制変更によるリスク

⚠️ **技術的な複雑さ**
- 一般ユーザーには理解が困難
- 秘密鍵管理の責任
- 操作ミスによる資産喪失

**解決に向けた取り組み**: レイヤー2ソリューション、より効率的な合意アルゴリズム、ユーザビリティの向上など`
      }
    ],

    keyPoints: [
      'ブロックチェーンは取引データをブロック単位で記録し、チェーン状に連結する分散型台帳技術',
      '分散性、透明性、不変性、セキュリティ、プログラマブル性が主な特徴',
      '合意アルゴリズムによってネットワーク全体でデータの正当性を確保',
      '暗号通貨以外にも供給チェーン管理や身分証明など多分野で応用可能',
      'スケーラビリティやエネルギー消費などの課題も存在する',
      '技術革新により課題解決と新たな応用分野の開拓が続いている'
    ],

    summary: 'このレッスンでは、ブロックチェーンの基本的な仕組みと特徴、そして暗号通貨以外での応用について学びました。分散型台帳技術として多くの可能性を秘めている一方で、現在も技術的な課題の解決に向けた取り組みが続いています。'
  }
}