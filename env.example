# =============================================================================
# 🚀 CRYPTO AI PLATFORM - 270レッスン学習プラットフォーム
# =============================================================================
# 独立デプロイメント用環境変数設定ファイル
# 必須変数には [REQUIRED] マークを付けています
#
# セットアップガイド:
# 1. このファイルを .env.local にコピー
# 2. 必須変数を設定
# 3. オプション変数を必要に応じて設定
# =============================================================================

# -----------------------------------------------------------------------------
# 🗄️ DATABASE & BACKEND (必須)
# -----------------------------------------------------------------------------

# Supabase - バックエンドサービス [REQUIRED]
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# Database URL - マイグレーション用 [REQUIRED for setup]
DATABASE_URL=postgresql://postgres:your_password@localhost:54322/postgres

# -----------------------------------------------------------------------------
# 🤖 AI SERVICES (必須 - 最低1つ)
# -----------------------------------------------------------------------------

# OpenAI - GPT-4, ChatGPT [REQUIRED]
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic Claude - 追加AI機能 [OPTIONAL]
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# JWT Secret - セッション管理用 [REQUIRED]
JWT_SECRET=your_jwt_secret_here

# -----------------------------------------------------------------------------
# 🌍 APPLICATION CONFIG (必須)
# -----------------------------------------------------------------------------

# アプリケーション URL [REQUIRED]
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------------------
# 📈 MARKET DATA APIs (オプション - 市場分析機能用)
# -----------------------------------------------------------------------------

# CoinGecko - 暗号通貨価格データ [OPTIONAL]
COINGECKO_API_KEY=your_coingecko_api_key_here

# Binance - 取引所データ [OPTIONAL]
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here

# CoinMarketCap - 市場データ [OPTIONAL]
COINMARKETCAP_API_KEY=your_coinmarketcap_api_key_here

# -----------------------------------------------------------------------------
# 🔐 SECURITY & 2FA (推奨)
# -----------------------------------------------------------------------------

# CSRF Protection [RECOMMENDED]
CSRF_SECRET=your_csrf_secret_here

# 2FA Contact Encryption (32-byte hex key) [RECOMMENDED]
CONTACT_ENCRYPTION_KEY=your_32_byte_hex_key_here
CONTACT_HASH_SALT=your_random_salt_here

# -----------------------------------------------------------------------------
# 📧 NOTIFICATION SERVICES (オプション)
# -----------------------------------------------------------------------------

# Email Service - Resend [OPTIONAL]
RESEND_API_KEY=your_resend_api_key_here

# Alternative SMTP Email [OPTIONAL]
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM_EMAIL=noreply@crypto-ai-platform.com

# SMS Service - Twilio [OPTIONAL]
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=your_twilio_phone_number

# Alternative SMS - AWS SNS [OPTIONAL]
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1

# Push Notifications - Firebase [OPTIONAL]
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_PRIVATE_KEY="your_firebase_private_key"
FIREBASE_CLIENT_EMAIL=your_firebase_client_email
FIREBASE_SERVER_KEY=your_firebase_server_key
FIREBASE_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"your_project_id","private_key_id":"your_private_key_id","private_key":"your_private_key","client_email":"your_client_email","client_id":"your_client_id","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/your_client_email"}

# -----------------------------------------------------------------------------
# 📈 ANALYTICS & MONITORING (オプション)
# -----------------------------------------------------------------------------

# PostHog Analytics [OPTIONAL]
NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key_here
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# Portfolio Optimization
OPTIMIZATION_MAX_ASSETS=20
OPTIMIZATION_CACHE_TTL=3600

# Sentry Error Tracking [RECOMMENDED for production]
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn_here
SENTRY_ORG=your_sentry_org_here
SENTRY_PROJECT=your_sentry_project_here
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here
SENTRY_REPORT_IN_DEV=false

# Custom Monitoring Endpoints [OPTIONAL]
LOGGING_ENDPOINT=your_logging_endpoint_here
METRICS_ENDPOINT=your_metrics_endpoint_here


# -----------------------------------------------------------------------------
# 🧠 RUNTIME MONITORING / SLO / JOBS（推奨・本番向け）
# -----------------------------------------------------------------------------

# 本番SLO初期値（推奨値）
MONITOR_P95_MS=2000
MONITOR_ERROR_RATE=1.5
MONITOR_QPS_MIN=30
MONITOR_HTTP_TIMEOUT_MS=1500
MONITOR_RT_FALLBACK_MS=1000

# バッチ/比較
BATCH_SEARCH_TIMEOUT_MS=60000
SNAPSHOT_TOL_APY_PCT=5
SNAPSHOT_TOL_TVL_PCT=5

# Cron/保護バイパス
NEXT_PUBLIC_BASE_URL=https://your-production-domain.vercel.app
CRON_TOKEN=your_strong_random_token
VERCEL_AUTOMATION_BYPASS_SECRET=your_vercel_automation_bypass_secret

# アラート送信先（任意: Slackや独自Webhook）
ALERT_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# 🔗 RPC（Solana/EVM、必要に応じて設定）
# -----------------------------------------------------------------------------

# Solana
SOLANA_RPC_URL=

# EVM RPC（必要なチェーンのみ設定。未設定時は内部既定/無効化）
ETHEREUM_RPC_URL=
POLYGON_RPC_URL=
ARBITRUM_RPC_URL=
OPTIMISM_RPC_URL=
BASE_RPC_URL=

# 各チェーンRPCのタイムアウト（ミリ秒）
EVM_HTTP_TIMEOUT_MS=12000
POLYGON_HTTP_TIMEOUT_MS=10000
ARBITRUM_HTTP_TIMEOUT_MS=10000
OPTIMISM_HTTP_TIMEOUT_MS=10000
BASE_HTTP_TIMEOUT_MS=10000


# 2FA lockout duration (minutes)
TWO_FA_LOCKOUT_MINUTES=30

# 2FA verification/setup rate-limit (per 15 min window)
TWO_FA_VERIFY_RATE_LIMIT_MAX=10
TWO_FA_SETUP_RATE_LIMIT_MAX=5

# 2FA configuration (optional overrides)
TWO_FA_ISSUER=Crypto AI Platform
TWO_FA_SERVICE=crypto-ai-platform.com
TWO_FA_ENCRYPTION_KEY=
TWO_FA_TOTP_WINDOW=1
TWO_FA_TOTP_DIGITS=6
TWO_FA_TOTP_PERIOD=30
TWO_FA_TOTP_ALGO=SHA256
TWO_FA_MAX_ATTEMPTS=5
TWO_FA_SESSION_TIMEOUT_MINUTES=10
TWO_FA_TRUSTED_DEVICE_DAYS=30
TWO_FA_BACKUP_CODE_COUNT=10
TWO_FA_BACKUP_CODE_LENGTH=8
TWO_FA_SUSPICIOUS_THRESHOLD=70
TWO_FA_GEOLOCATION_ENABLED=true
TWO_FA_DEVICE_FINGERPRINT_ENABLED=true
# 2FA Configuration
TWO_FA_ISSUER=Crypto AI Platform
TWO_FA_SERVICE=crypto-ai-platform.com
TWO_FA_ENCRYPTION_KEY=your_2fa_encryption_key_here
TWO_FA_LOCKOUT_MINUTES=30
TWO_FA_VERIFY_RATE_LIMIT_MAX=10
TWO_FA_SETUP_RATE_LIMIT_MAX=5
TWO_FA_TOTP_WINDOW=1
TWO_FA_TOTP_DIGITS=6
TWO_FA_TOTP_PERIOD=30
TWO_FA_TOTP_ALGO=SHA256
TWO_FA_MAX_ATTEMPTS=5
TWO_FA_SESSION_TIMEOUT_MINUTES=10
TWO_FA_TRUSTED_DEVICE_DAYS=30
TWO_FA_BACKUP_CODE_COUNT=10
TWO_FA_BACKUP_CODE_LENGTH=8
TWO_FA_SUSPICIOUS_THRESHOLD=70
TWO_FA_GEOLOCATION_ENABLED=true
TWO_FA_DEVICE_FINGERPRINT_ENABLED=true
TWO_FA_RISK_ANALYSIS_ENABLED=true

# =============================================================================
# 🚀 QUICK START GUIDE
# =============================================================================
#
# 最小構成で始める場合（学習機能のみ）:
# 1. NEXT_PUBLIC_SUPABASE_URL
# 2. NEXT_PUBLIC_SUPABASE_ANON_KEY  
# 3. SUPABASE_SERVICE_ROLE_KEY
# 4. OPENAI_API_KEY
# 5. JWT_SECRET
# 6. NEXT_PUBLIC_APP_URL
#
# 完全機能版の場合、追加で設定:
# - Market Data APIs (CoinGecko/Binance/CoinMarketCap)
# - Notification Services (Resend/Twilio)
# - Analytics (PostHog/Sentry)
# - 2FA Security settings
#
# =============================================================================
