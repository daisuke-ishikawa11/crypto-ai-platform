# WSL2最適化npm設定 - ENOTEMPTY対策完全版（現代版）
# 暗号通貨AIプラットフォーム用

# =================================================
# 基本設定（パフォーマンス最優先）
# =================================================
fund=false
audit=false
progress=false
timing=true

# 現代的なキャッシュ戦略（非推奨オプション削除）
prefer-offline=true
prefer-online=false

# =================================================
# ネットワーク・リトライ設定（ENOTEMPTY対策）
# =================================================
fetch-retries=5
fetch-retry-mintimeout=15000
fetch-retry-maxtimeout=120000
fetch-timeout=300000

# WSL2での接続安定化（段階的アプローチ）
maxsockets=2
registry=https://registry.npmjs.org/

# =================================================
# セキュリティ・互換性設定
# =================================================
legacy-peer-deps=true
engine-strict=false
strict-ssl=true
package-lock=true

# 現代的な依存関係管理（非推奨オプション削除）
# optional=false は --omit=optional または --include=optional を使用
omit=optional

# =================================================
# パフォーマンス最適化設定
# =================================================
prefer-dedupe=true
save-exact=false
save-prefix=^

# WSL2パフォーマンス向上
ignore-scripts=false

# =================================================
# ログ・通知設定
# =================================================
loglevel=warn
update-notifier=false

# =================================================
# WSL2特有の問題回避（現代版）
# =================================================
# unsafe-perm は削除（npm v8以降で非推奨）
# 代替: package.jsonのscriptsでsudoが必要な場合は明示的に指定

# キャッシュの場所をLinux側に固定（パフォーマンス向上）
cache=/tmp/.npm-cache

# Node.jsバージョン管理最適化
engine-strict=false
# scripts-prepend-node-path は非推奨（npm v9+で削除予定）